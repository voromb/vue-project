// ============================================
// Fuente: CNMC / OCU / Sentencias del Tribunal Supremo
// ============================================

// Cada marca tiene su fecha  y modelos en esa época
export const COCHES_AFECTADOS = {
    'Alfa Romeo': {
        desde: 2006,
        hasta: 2013,
        modelos: ['147', '156', '159', 'Brera', 'GT', 'MiTo', 'Giulietta', 'Spider'],
    },
    Audi: {
        desde: 2008,
        hasta: 2013,
        modelos: ['A1', 'A3', 'A4', 'A5', 'A6', 'A8', 'Q3', 'Q5', 'Q7', 'TT'],
    },
    BMW: {
        desde: 2008,
        hasta: 2013,
        modelos: ['Serie 1', 'Serie 3', 'Serie 5', 'Serie 7', 'X1', 'X3', 'X5', 'X6', 'Z4'],
    },
    Chevrolet: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'Aveo',
            'Captiva',
            'Cruze',
            'Epica',
            'Kalos',
            'Lacetti',
            'Matiz',
            'Nubira',
            'Orlando',
            'Spark',
            'Trax',
        ],
    },
    Chrysler: {
        desde: 2008,
        hasta: 2013,
        modelos: ['300C', 'Grand Voyager', 'PT Cruiser', 'Sebring', 'Voyager'],
    },
    Citroën: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'Berlingo',
            'C1',
            'C2',
            'C3',
            'C3 Picasso',
            'C4',
            'C4 Picasso',
            'C5',
            'C6',
            'C8',
            'DS3',
            'DS4',
            'DS5',
            'Nemo',
            'Xsara Picasso',
        ],
    },
    Dodge: {
        desde: 2008,
        hasta: 2013,
        modelos: ['Avenger', 'Caliber', 'Journey', 'Nitro'],
    },
    Fiat: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            '500',
            '500L',
            'Bravo',
            'Croma',
            'Doblò',
            'Fiorino',
            'Freemont',
            'Grande Punto',
            'Idea',
            'Linea',
            'Panda',
            'Punto',
            'Punto Evo',
            'Qubo',
            'Sedici',
            'Stilo',
        ],
    },
    Ford: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'C-Max',
            'Fiesta',
            'Focus',
            'Fusion',
            'Galaxy',
            'Ka',
            'Kuga',
            'Mondeo',
            'S-Max',
            'Transit Connect',
        ],
    },
    Honda: {
        desde: 2006,
        hasta: 2013,
        modelos: ['Accord', 'Civic', 'CR-V', 'CR-Z', 'FR-V', 'Insight', 'Jazz', 'Legend'],
    },
    Hyundai: {
        desde: 2010,
        hasta: 2013,
        modelos: [
            'Accent',
            'Coupé',
            'Elantra',
            'Getz',
            'i10',
            'i20',
            'i30',
            'i40',
            'ix20',
            'ix35',
            'ix55',
            'Santa Fe',
            'Sonata',
            'Tucson',
            'Veloster',
        ],
    },
    Jeep: {
        desde: 2008,
        hasta: 2013,
        modelos: ['Cherokee', 'Commander', 'Compass', 'Grand Cherokee', 'Patriot', 'Wrangler'],
    },
    Kia: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'Carens',
            'Carnival',
            'Ceed',
            'Cerato',
            'Magentis',
            'Optima',
            'Picanto',
            'Rio',
            'Sorento',
            'Soul',
            'Sportage',
            'Venga',
        ],
    },
    Lancia: {
        desde: 2006,
        hasta: 2013,
        modelos: ['Delta', 'Musa', 'Phedra', 'Thesis', 'Voyager', 'Ypsilon'],
    },
    Lexus: {
        desde: 2006,
        hasta: 2013,
        modelos: ['CT 200h', 'GS', 'IS', 'LS', 'NX', 'RX'],
    },
    'Mercedes-Benz': {
        desde: 2010,
        hasta: 2013,
        modelos: [
            'Clase A',
            'Clase B',
            'Clase C',
            'Clase E',
            'Clase S',
            'CLA',
            'CLS',
            'GLA',
            'GLC',
            'GLE',
            'GLK',
            'ML',
            'SLK',
            'Viano',
        ],
    },
    Mitsubishi: {
        desde: 2010,
        hasta: 2013,
        modelos: [
            'ASX',
            'Colt',
            'Grandis',
            'i-MiEV',
            'L200',
            'Lancer',
            'Montero',
            'Outlander',
            'Pajero',
        ],
    },
    Nissan: {
        desde: 2008,
        hasta: 2013,
        modelos: [
            'Almera',
            'Juke',
            'Micra',
            'Murano',
            'Navara',
            'Note',
            'NV200',
            'Pathfinder',
            'Pixo',
            'Primastar',
            'Qashqai',
            'X-Trail',
        ],
    },
    Opel: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'Agila',
            'Antara',
            'Astra',
            'Combo',
            'Corsa',
            'Insignia',
            'Meriva',
            'Mokka',
            'Vivaro',
            'Zafira',
        ],
    },
    Peugeot: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            '1007',
            '107',
            '206',
            '207',
            '208',
            '3008',
            '301',
            '307',
            '308',
            '4007',
            '407',
            '5008',
            '508',
            '607',
            '807',
            'Bipper',
            'Expert',
            'Partner',
            'RCZ',
        ],
    },
    Porsche: {
        desde: 2010,
        hasta: 2013,
        modelos: ['911', 'Boxster', 'Cayenne', 'Cayman', 'Panamera'],
    },
    Renault: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'Captur',
            'Clio',
            'Espace',
            'Fluence',
            'Grand Scénic',
            'Kangoo',
            'Koleos',
            'Laguna',
            'Latitude',
            'Mégane',
            'Modus',
            'Scénic',
            'Trafic',
            'Twingo',
            'Wind',
            'ZOE',
        ],
    },
    Seat: {
        desde: 2006,
        hasta: 2013,
        modelos: ['Alhambra', 'Altea', 'Córdoba', 'Exeo', 'Ibiza', 'León', 'Mii', 'Toledo'],
    },
    Skoda: {
        desde: 2008,
        hasta: 2013,
        modelos: ['Citigo', 'Fabia', 'Octavia', 'Rapid', 'Roomster', 'Superb', 'Yeti'],
    },
    Toyota: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'Auris',
            'Avensis',
            'Aygo',
            'Corolla',
            'IQ',
            'Land Cruiser',
            'Prius',
            'RAV4',
            'Urban Cruiser',
            'Verso',
            'Yaris',
        ],
    },
    Volkswagen: {
        desde: 2008,
        hasta: 2013,
        modelos: [
            'Beetle',
            'Caddy',
            'CC',
            'Eos',
            'Golf',
            'Jetta',
            'Multivan',
            'Passat',
            'Polo',
            'Scirocco',
            'Sharan',
            'Tiguan',
            'Touareg',
            'Touran',
            'Up!',
        ],
    },
    Volvo: {
        desde: 2006,
        hasta: 2013,
        modelos: [
            'C30',
            'C70',
            'S40',
            'S60',
            'S80',
            'V40',
            'V50',
            'V60',
            'V70',
            'XC60',
            'XC70',
            'XC90',
        ],
    },
};

// Función para comprobar si un vehículo está afectado
export function comprobarAfectado(marca, modelo, anio) {
    const marcaData = COCHES_AFECTADOS[marca];
    if (!marcaData) return { afectado: false, motivo: 'La marca no está en la lista de afectados' };

    const anioNum = parseInt(anio);
    if (anioNum < marcaData.desde || anioNum > marcaData.hasta) {
        return {
            afectado: false,
            motivo: `${marca} está afectada entre ${marcaData.desde} y ${marcaData.hasta}. Tu vehículo es de ${anio}.`,
        };
    }

    if (!marcaData.modelos.includes(modelo)) {
        return {
            afectado: false,
            motivo: `El modelo ${modelo} no está en la lista de modelos afectados de ${marca}.`,
        };
    }

    return {
        afectado: true,
        motivo: `Tu ${marca} ${modelo} (${anio}) está afectado por el cártel (periodo ${marcaData.desde}–${marcaData.hasta}).`,
    };
}

// Obtener lista de marcas
export function getMarcas() {
    return Object.keys(COCHES_AFECTADOS).sort();
}

// Obtener modelos de una marca
export function getModelos(marca) {
    return COCHES_AFECTADOS[marca]?.modelos || [];
}

// Obtener rango de años de una marca
export function getRangoAnios(marca) {
    const data = COCHES_AFECTADOS[marca];
    if (!data) return { desde: 2006, hasta: 2013 };
    return { desde: data.desde, hasta: data.hasta };
}
